!function(){"use strict";function a(){for(var a,b,c=document.querySelectorAll("[data-i18nid]"),d=0,e=c.length;d<e;d++)a=c[d].dataset.i18nid,b=chrome.i18n.getMessage(a),""!==b&&(c[d].textContent=b)}document.addEventListener("DOMContentLoaded",a)}(),function(a){"use strict";function b(){localStorage.format=localStorage.format||!1,localStorage.show_date=localStorage.show_date||!0,localStorage.cycle=localStorage.cycle||!0,localStorage.theme=localStorage.theme||"theme-light","undefined"==typeof localStorage.use_bg_image&&d("background_image",""),localStorage.use_bg_image=localStorage.use_bg_image||!1}function c(a,b){c.freader||(c.freader=new FileReader);var d;c.freader.readAsDataURL(a),c.freader.addEventListener("load",d=function(){this.removeEventListener("load",d),b(this.result)})}function d(a,b){var c={};c[a]=b,chrome.storage.local.set(c)}function e(){function a(){this.value?this.label_elem.textContent=this.files[0].name:this.label_elem.textContent=this.placeholder}for(var b,c,d=document.querySelectorAll('[type="file"]'),e=0,f=d.length;e<f;e++)c=d[e],b=document.createElement("label"),b.textContent=c.placeholder,b.setAttribute("for",c.id),c.parentNode.insertBefore(b,c.nextSibling),c.addEventListener("change",a.bind(c)),c.label_elem=b}b(),document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("format"),b=document.getElementById("showDate"),f=document.getElementById("theme"),g=document.getElementById("cycle"),h=document.getElementById("use-bg-img"),i=document.getElementById("bg-img-picker");a.checked=JSON.parse(localStorage.format),a.addEventListener("change",function(){localStorage.format=a.checked,clock.load_options()}),b.checked=JSON.parse(localStorage.show_date),b.addEventListener("change",function(){localStorage.show_date=b.checked,clock.load_options()}),g.checked=JSON.parse(localStorage.cycle),g.addEventListener("change",function(){localStorage.cycle=g.checked,f.disabled=g.checked,clock.load_options()}),f.value=localStorage.theme,f.disabled=g.checked,f.addEventListener("change",function(){localStorage.theme=f.children[f.selectedIndex].value,clock.load_options()}),h.checked=JSON.parse(localStorage.use_bg_image),i.disabled=!h.checked,h.addEventListener("change",function(){localStorage.use_bg_image=h.checked,i.disabled=!h.checked,clock.load_options()}),i.placeholder=chrome.i18n.getMessage("select_image"),i.addEventListener("change",function(){var a=i.files[0];a&&c(a,function(a){d("background_image",a)})}),e()})}(newtab);