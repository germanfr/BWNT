var newtab=function(){"use strict";function a(a){return chrome.i18n.getMessage(p[a])}function b(a){return chrome.i18n.getMessage(o[a])}function c(a){var b;return b=a>12||0===a?"time_pm":"time_am",chrome.i18n.getMessage(b)}function d(){f.call(this),e.call(this),this.load_options(),this.start(),window.addEventListener("storage",this.load_options.bind(this)),chrome.storage.onChanged.addListener(function(a,b){a.background_image&&this.set_background_image(a.background_image.newValue)}.bind(this))}function e(){this._last_theme="notheme",this.bg_image="",j.read_option("background_image",function(a){h.call(this,a.background_image),this.set_background_image(a.background_image)}.bind(this))}function f(){var a=document.getElementById(l);this._clock_elem=document.createElement("div"),a.appendChild(this._clock_elem);var b=document.createElement("div");b.className="meridiem",a.appendChild(b),this._meridiem_elem=b,this._date_elem=document.getElementById("date"),this._bg_elem=document.getElementById("background-layer")}function g(){var a="";this.use_bg_image&&(a="url('"+this.bg_image+"')"),this._bg_elem.style.backgroundImage=a,document.body.classList.toggle("bgimage",this.use_bg_image)}function h(a){function b(){this._bg_elem.style.opacity="1"}if(!a)return void b.call(this);var c=new Image;c.onload=b.bind(this),c.src=a}function i(){this._last_theme!==this.theme&&(document.body.classList.remove(this._last_theme),document.body.classList.add(this.theme),this._last_theme=this.theme),g.call(this),this.show_date||(this._date_elem.textContent=""),this.format||(this._meridiem_elem.textContent="")}var j={};const k=1e3,l="clock",m="theme-light",n="theme-night",o=["month_january","month_february","month_march","month_april","month_may","month_june","month_july","month_august","month_september","month_october","month_november","month_december"],p=["day_sunday","day_monday","day_tuesday","day_wednesday","day_thursday","day_friday","day_saturday"];return j.read_option=function(a,b){return chrome.storage.local.get(a,b)},d.prototype.load_options=function(){this.format=!!localStorage.format&&JSON.parse(localStorage.format),this.show_date=!localStorage.show_date||JSON.parse(localStorage.show_date),this.cycle=!localStorage.cycle||JSON.parse(localStorage.cycle),this.update(),this.cycle?this.theme=this.hour>=6&&this.hour<=20?m:n:this.theme=localStorage.theme||m,this.use_bg_image=!!localStorage.use_bg_image&&JSON.parse(localStorage.use_bg_image),i.call(this),this.show()},d.prototype.set_background_image=function(a){this.bg_image=a,this.use_bg_image&&g.call(this)},d.prototype.update=function(){var d=new Date,e=d.getHours(),f=e,g=d.getMinutes();f>12?f-=12:0===f&&(f=12),e<10&&(e="0"+e),g<10&&(g="0"+g),this.minute=g,this.hour=e,this.hour12=f,this.meridiem=c(e),this.day=d.getDate(),this.weekday=a(d.getDay()),this.month=b(d.getMonth())},d.prototype.show=function(){var a;this.format?(a=this.hour12,this._meridiem_elem.textContent=this.meridiem):a=this.hour,this._clock_elem.textContent=a+":"+this.minute,this.show_date&&(this._date_elem.textContent=this.weekday+", "+this.month+" "+this.day)},d.prototype.start=function(){var a=this;this._started_id||(this._started_id=window.setInterval(function(){a.update(),a.show()},k))},d.prototype.stop=function(){this._started_id&&(window.clearInterval(this._started_id),this._started_id=null)},j.Clock=d,j}(),clock;window.addEventListener("DOMContentLoaded",function(){clock=new newtab.Clock});